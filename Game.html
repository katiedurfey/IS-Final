<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sudoku Game</title>
<style>
    body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        margin: 20px;
    }
    .game-container {
        display: flex;
        gap: 80px; /* push instructions further right */
    }
    .instructions {
        max-width: 300px;
        text-align: left;
    }
    h1 { margin-bottom: 5px; }
    select, button { font-size: 16px; padding: 5px; margin: 5px; }
    #timer, #highscore { font-weight: bold; }
    table {
        border-collapse: collapse;
        margin: auto;
    }
    td {
        width: 50px;
        height: 50px;
        text-align: center;
        border: 1px solid #000;
        vertical-align: middle;
        position: relative;
    }
    input {
        width: 100%;
        height: 100%;
        text-align: center;
        font-size: 20px;
        border: none;
        background: transparent;
    }
</style>
</head>
<body>

<div class="game-container">
<div>
    <h1>Sudoku Game</h1>
    <label for="level">Select Level:</label>
    <select id="level">
        <option value="easy">Easy</option>
        <option value="medium">Medium</option>
        <option value="hard">Hard</option>
    </select>
    <button id="startBtn">Start Game</button>
    <button id="hintBtn">Hint</button>
    <p>Time: <span id="timer">0</span> seconds</p>
    <p>High Score: <span id="highscore">--</span> seconds</p>

    <table id="sudoku"></table>
</div>

<div class="instructions">
    <h2>How to Play Sudoku</h2>
    <p>Fill the 9x9 grid so that every row, every column, and each 3x3 block contains the numbers 1-9 exactly once. Click on empty cells to enter numbers. Complete the puzzle as quickly as possible!</p>
</div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    let solution = [];
    let timer;
    let seconds = 0;

    const puzzles = {
        easy: [
            [
                [5,3,0,0,7,0,0,0,0],
                [6,0,0,1,9,5,0,0,0],
                [0,9,8,0,0,0,0,6,0],
                [8,0,0,0,6,0,0,0,3],
                [4,0,0,8,0,3,0,0,1],
                [7,0,0,0,2,0,0,0,6],
                [0,6,0,0,0,0,2,8,0],
                [0,0,0,4,1,9,0,0,5],
                [0,0,0,0,8,0,0,7,9]
            ],
            [
                [0,2,0,6,0,8,0,0,0],
                [5,8,0,0,0,9,7,0,0],
                [0,0,0,0,4,0,0,0,0],
                [3,7,0,0,0,0,5,0,0],
                [6,0,0,0,0,0,0,0,4],
                [0,0,8,0,0,0,0,1,3],
                [0,0,0,0,2,0,0,0,0],
                [0,0,9,8,0,0,0,3,6],
                [0,0,0,3,0,6,0,9,0]
            ]
        ],
        medium: [
            [
                [0,0,0,0,6,0,0,0,0],
                [0,0,0,1,0,9,0,0,0],
                [3,0,0,0,0,0,2,0,0],
                [0,1,0,0,0,0,0,6,0],
                [0,0,0,4,0,7,0,0,0],
                [0,6,0,0,0,0,0,3,0],
                [0,0,8,0,0,0,0,0,2],
                [0,0,0,9,0,6,0,0,0],
                [0,0,0,0,2,0,0,0,0]
            ],
            [
                [0,0,0,7,0,0,0,0,0],
                [0,0,0,0,0,0,3,0,0],
                [0,0,1,0,5,0,0,0,0],
                [0,0,0,0,0,1,0,0,0],
                [0,3,0,0,0,0,0,5,0],
                [0,0,0,6,0,0,0,0,0],
                [0,0,0,0,2,0,8,0,0],
                [0,0,7,0,0,0,0,0,0],
                [0,0,0,0,0,4,0,0,0]
            ]
        ],
        hard: [
            [
                [0,0,0,0,0,0,0,1,2],
                [0,0,0,0,0,0,0,0,0],
                [0,0,1,0,9,5,0,0,0],
                [0,0,0,0,0,0,2,0,0],
                [0,0,0,7,0,1,0,0,0],
                [0,0,3,0,0,0,0,0,0],
                [0,0,0,5,2,0,9,0,0],
                [0,0,0,0,0,0,0,0,0],
                [8,7,0,0,0,0,0,0,0]
            ],
            [
                [0,0,5,3,0,0,0,0,0],
                [8,0,0,0,0,0,0,2,0],
                [0,7,0,0,1,0,5,0,0],
                [4,0,0,0,0,5,3,0,0],
                [0,1,0,0,7,0,0,0,6],
                [0,0,3,2,0,0,0,8,0],
                [0,6,0,5,0,0,0,0,9],
                [0,0,4,0,0,0,0,3,0],
                [0,0,0,0,0,9,7,0,0]
            ]
        ]
    };

    const startBtn = document.getElementById("startBtn");
    const hintBtn = document.getElementById("hintBtn");
    const sudokuTable = document.getElementById("sudoku");
    const timerDisplay = document.getElementById("timer");
    const highscoreDisplay = document.getElementById("highscore");

    function startGame() {
        clearInterval(timer);
        seconds = 0;
        timerDisplay.innerText = seconds;

        let level = document.getElementById("level").value;
        let levelPuzzles = puzzles[level];
        let puzzle = levelPuzzles[Math.floor(Math.random() * levelPuzzles.length)];

        solution = puzzle.map(row => row.slice());
        generateGrid(puzzle);

        timer = setInterval(() => {
            seconds++;
            timerDisplay.innerText = seconds;
        }, 1000);
    }

    function generateGrid(puzzle) {
        sudokuTable.innerHTML = "";
        for(let i=0;i<9;i++){
            let row = sudokuTable.insertRow();
            for(let j=0;j<9;j++){
                let cell = row.insertCell();
                // Bold borders always
                cell.style.borderTop = (i%3===0) ? "2px solid black" : "1px solid black";
                cell.style.borderLeft = (j%3===0) ? "2px solid black" : "1px solid black";
                cell.style.borderBottom = (i===8) ? "2px solid black" : "";
                cell.style.borderRight = (j===8) ? "2px solid black" : "";

                if(puzzle[i][j]===0){
                    let input = document.createElement("input");
                    input.type="number";
                    input.min=1;
                    input.max=9;
                    input.oninput=checkSolution;
                    cell.appendChild(input);
                } else {
                    cell.innerText = puzzle[i][j];
                    cell.style.fontWeight = "bold";
                }
            }
        }
    }

    function checkSolution() {
        let grid = [];
        for(let i=0;i<9;i++){
            let row = [];
            for(let j=0;j<9;j++){
                let cell = sudokuTable.rows[i].cells[j];
                if(cell.firstChild && cell.firstChild.tagName==="INPUT"){
                    let val = parseInt(cell.firstChild.value);
                    if(isNaN(val)) return;
                    row.push(val);
                } else {
                    row.push(parseInt(cell.innerText));
                }
            }
            grid.push(row);
        }

        if(validateSolution(grid)){
            clearInterval(timer);
            alert(`Congratulations! You solved the puzzle in ${seconds} seconds.`);
            let high = localStorage.getItem("sudokuHighScore");
            if(!high || seconds < high){
                localStorage.setItem("sudokuHighScore", seconds);
                highscoreDisplay.innerText = seconds;
            }
        }
    }

    function validateSolution(grid){
        for(let i=0;i<9;i++){
            let rowSet = new Set();
            let colSet = new Set();
            for(let j=0;j<9;j++){
                rowSet.add(grid[i][j]);
                colSet.add(grid[j][i]);
            }
            if(rowSet.size!==9 || colSet.size!==9) return false;
        }
        for(let i=0;i<9;i+=3){
            for(let j=0;j<9;j+=3){
                let blockSet = new Set();
                for(let x=0;x<3;x++){
                    for(let y=0;y<3;y++){
                        blockSet.add(grid[i+x][j+y]);
                    }
                }
                if(blockSet.size!==9) return false;
            }
        }
        return true;
    }

    function giveHint() {
        let emptyCells = [];
        for(let i=0;i<9;i++){
            for(let j=0;j<9;j++){
                let cell = sudokuTable.rows[i].cells[j];
                if(cell.firstChild && cell.firstChild.tagName==="INPUT" && cell.firstChild.value===""){
                    emptyCells.push({row:i, col:j});
                }
            }
        }
        if(emptyCells.length===0) return;
        let hintCell = emptyCells[Math.floor(Math.random()*emptyCells.length)];
        let cell = sudokuTable.rows[hintCell.row].cells[hintCell.col];
        cell.firstChild.value = solution[hintCell.row][hintCell.col];
        checkSolution();
    }

    startBtn.addEventListener("click", startGame);
    hintBtn.addEventListener("click", giveHint);

    // Load high score
    let high = localStorage.getItem("sudokuHighScore");
    if(high) highscoreDisplay.innerText = high;
});
</script>

</body>
</html>
